<turbo-channels-stream-source channel-name="dest_units_list"/>
<form action="/units/search/" method="POST" class="form-inline">
    {% csrf_token %}
    <input type="hidden" name="cachebust" value="{{ timestamp }}">
    <input type="number" step="0.01" value="{{ value }}" class="form-control"
           placeholder="Value to convert" name="value"/>
    <select data-controller="units" class="form-control"
           data-units-target="name" data-action="change->units#compatible"
            title="from unit" name="unit">
        {% for unit_item in units %}
            <option value="{{ unit_item.code }}" {% if unit.code == unit_item.code%}selected{% endif %}>
                {{ unit_item.name }}</option>
        {% endfor %}
    </select>
    <label for="to_unit">&nbsp;to&nbsp;</label>
    <select id="dest_units_list" class="form-control"
            title="to unit" name="dest_unit">
        {% for unit_item in dest_units %}
            <option value="{{ unit_item.code }}" {% if dest_unit.code == unit_item.code%}selected{% endif %}>
                {{ unit_item.name }}</option>
        {% endfor %}
    </select>
    <input type="submit" class="form-control btn"/>
</form>
<div id="unit_table" style="height:150px; width:100%;overflow:hidden;">
    <table class="table" style="overflow-y: scroll;">
        <thead>
        <tr>
            <th>Result</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>{{ result }}</td>
        </tr>
        </tbody>
    </table>
</div>
